% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/band.R
\name{band_func}
\alias{band_func}
\title{Band Plot of Hazard Ratio Significance}
\usage{
band_func(data1, data2, lim0 = 0, lim1 = 1500, var)
}
\arguments{
\item{data1}{A \code{data.frame} with columns \code{age}, \code{dead}, and \code{group}, for survival data.}

\item{data2}{A \code{data.frame} containing asymptotic or bootstrap hazard ratio results with columns:
\itemize{
\item \code{time}: time points
\item \code{loghr}: log hazard ratio
\item \code{low}: lower bound of confidence interval
\item \code{up}: upper bound of confidence interval
\item \code{name}: group name
}}

\item{lim0}{Numeric. Minimum x-axis limit (default 0).}

\item{lim1}{Numeric. Maximum x-axis limit (default 1500).}

\item{var}{Character. Name of the treatment group (used for selecting median and plot title).}
}
\value{
A \code{ggplot} object showing a horizontal band plot. Regions where the hazard
ratio is significant (CI does not include zero) are highlighted in color. Median
survival time is marked along the x-axis.
}
\description{
Creates a horizontal “band” plot highlighting periods where the hazard ratio is
statistically significant, along with median survival markers.
}
\details{
The function calculates median survival from \code{data1} using \code{survfit()} and
\code{surv_median()}. It highlights time intervals in \code{data2} where the log hazard ratio
is statistically significant. The x-axis is annotated with key time points including
the first and last significant times and the median survival time.
}
\examples{
\dontrun{
boot_hr <- bshr(data=example_data, contr = "Control", var = "GTE", n_boot = 100)
p <- band_func(data1 = example_data, data2 = boot_hr, lim0 = 0, lim1 = 1500, var = "GTE")
print(p)
hr_df <- hazardSE(data=example_data, contr = "Control", var = "GTE")
p <- band_func(data1 = example_data, data2 = hr_df, lim0 = 0, lim1 = 1500, var = "GTE")
print(p)
}
}
\keyword{band}
\keyword{hazard}
\keyword{plot}
\keyword{ratio}
